<template>
    <div class="slds-form-element">
        <label class="slds-form-element__label" for="abn-input">ABN Lookup</label>
        <div class="slds-form-element__control">
            <div class="slds-input-has-icon slds-input-has-icon_right">
                <lightning-input
                    type="text"
                    id="abn-input"
                    name="abn"
                    value={abnNumber}
                    onchange={handleAbnChange}
                    placeholder="Enter ABN number"
                    pattern="[0-9]{11}"
                    message-when-pattern-mismatch="Please enter a valid 11-digit ABN number"
                    required>
                </lightning-input>
                <lightning-button 
                    variant="brand"
                    label="Search"
                    onclick={handleSearch}
                    class="slds-m-left_x-small"
                    disabled={isSearchDisabled}>
                </lightning-button>
            </div>
        </div>
    </div>

    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
    </template>

    <template if:true={abnDetails}>
        <div class="slds-m-top_medium">
            <div class="slds-box slds-theme_default">
                <dl class="slds-dl_horizontal slds-wrap">
                    <dt class="slds-dl_horizontal__label slds-truncate">Entity Name:</dt>
                    <dd class="slds-dl_horizontal__detail">{abnDetails.entityName}</dd>
                    
                    <dt class="slds-dl_horizontal__label slds-truncate">ABN Status:</dt>
                    <dd class="slds-dl_horizontal__detail">{abnDetails.abnStatus}</dd>
                    
                    <dt class="slds-dl_horizontal__label slds-truncate">Entity Type:</dt>
                    <dd class="slds-dl_horizontal__detail">{abnDetails.entityType}</dd>
                    
                    <dt class="slds-dl_horizontal__label slds-truncate">State:</dt>
                    <dd class="slds-dl_horizontal__detail">{abnDetails.state}</dd>
                </dl>
            </div>
        </div>
    </template>

    <template if:true={error}>
        <div class="slds-m-top_small">
            <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
                <span class="slds-assistive-text">error</span>
                <h2>{error}</h2>
            </div>
        </div>
    </template>
</template>