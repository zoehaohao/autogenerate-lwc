<!-- personalDetailsForm.html -->
<template>
    <div class="slds-box slds-box_x-small slds-m-around_x-small">
        <div class="slds-text-heading_medium slds-m-bottom_small">Residential Viability and Prudential Reporting</div>
        <div class="slds-text-body_regular slds-m-bottom_medium">
            The information collected in this section will help to identify approved providers that may be facing financial stress, or emerging risk issues that could lead to financial stress later. Early identification of emerging risk will allow the department to proactively engage with providers, and to work collaboratively with them.
        </div>

        <div class="slds-text-heading_small slds-m-vertical_medium">Solvency</div>
        <lightning-dual-listbox
            name="solvency"
            label="Are you currently concerned about the solvency of your organisation?"
            options={solvencyOptions}
            required
            field-level-help="Please select one option."
            onchange={handleSolvencyChange}
        ></lightning-dual-listbox>

        <lightning-dual-listbox
            name="solvencyIssues"
            label="Do you envisage any solvency issues arising in the next six months?"
            options={solvencyIssuesOptions}
            required
            field-level-help="Please select one option."
            onchange={handleSolvencyIssuesChange}
        ></lightning-dual-listbox>

        <div class="slds-text-heading_small slds-m-vertical_medium">Financial Performance</div>
        <lightning-dual-listbox
            name="operationalLoss"
            label="Do you forecast an operational loss for the current year?"
            options={operationalLossOptions}
            required
            field-level-help="Please select one option."
            onchange={handleOperationalLossChange}
        ></lightning-dual-listbox>

        <div class="slds-m-top_medium">
            <lightning-button
                variant="brand"
                label="Save"
                title="Save"
                onclick={handleSave}
                class="slds-m-right_x-small"
                disabled={isProcessing}
            ></lightning-button>
            <lightning-button
                variant="neutral"
                label="Cancel"
                title="Cancel"
                onclick={handleCancel}
                disabled={isProcessing}
            ></lightning-button>
        </div>

        <template if:true={isProcessing}>
            <div class="slds-m-top_medium">
                <lightning-spinner alternative-text="Processing..." variant="brand"></lightning-spinner>
            </div>
        </template>

        <template if:true={showSuccess}>
            <div class="slds-m-top_medium slds-text-color_success slds-text-heading_small">
                Form submitted successfully!
            </div>
        </template>

        <template if:true={showError}>
            <div class="slds-m-top_medium slds-text-color_error slds-text-heading_small">
                Error: {errorMessage}
            </div>
        </template>
    </div>
</template>
