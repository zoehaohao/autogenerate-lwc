<!-- dohQFRForm.html -->
<template>
    <div class="slds-box slds-box_x-small slds-m-around_x-small">
        <div class="slds-grid slds-grid_align-spread slds-m-bottom_small">
            <div class="slds-text-heading_label">Quarterly Financial Report</div>
            <div>
                <lightning-button
                    label="Save &amp; Close"
                    variant="brand"
                    onclick={handleSave}
                    class="slds-m-right_xx-small"
                    disabled={isSaving}
                >
                </lightning-button>
                <lightning-button
                    label="Download Copy"
                    variant="neutral"
                    onclick={handleDownload}
                    disabled={isDownloading}
                >
                </lightning-button>
            </div>
        </div>
        <div class="slds-text-heading_medium slds-m-bottom_small">
            Residential Viability and Prudential Reporting
        </div>
        <div class="slds-box slds-m-vertical_medium">
            <lightning-icon
                icon-name="utility:info"
                size="x-small"
                class="slds-m-right_xx-small"
            ></lightning-icon>
            <span>About this section</span>
            <p class="slds-m-bottom_medium">
                The information collected in this section will help to identify approved providers that may be facing financial stress, or emerging risk issues that could lead to financial stress later. Early identification of emerging risk will allow the department to proactively engage with providers, and to work collaboratively with them.
            </p>
            <p class="slds-m-bottom_medium">
                Please respond to the questions below, providing additional comments where appropriate. If you encounter any difficulties, please contact Forms Administration on (02) 4403 0440.
            </p>
            <p>Please answer the following questions and provide additional information where appropriate.</p>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="solvency" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Solvency">Solvency</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="solvency">
                <lightning-input
                    type="checkbox"
                    label="Are you currently concerned about the solvency of your organisation?"
                    onchange={handleSolvencyChange}
                    checked={solvencyConcern}
                ></lightning-input>
                <lightning-input
                    type="checkbox"
                    label="Do you envisage any solvency issues arising in the next six months?"
                    onchange={handleSolvencyIssueChange}
                    checked={solvencyIssue}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="financial-performance" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Financial Performance">Financial Performance</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="financial-performance">
                <lightning-input
                    type="checkbox"
                    label="Do you forecast an operational loss for the current year?"
                    onchange={handleOperationalLossChange}
                    checked={operationalLoss}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="home-care-recipients" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Home Care Recipients">Home Care Recipients</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="home-care-recipients">
                <lightning-input
                    type="checkbox"
                    label="Is your current number of home care recipients below the desired level?"
                    onchange={handleHomeCareRecipientsChange}
                    checked={homeCareRecipientsBelowDesired}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="business-improvement" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Business Improvement Advice or Strategies">Business Improvement Advice or Strategies</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="business-improvement">
                <lightning-input
                    type="checkbox"
                    label="Are you currently implementing, or do you plan to implement, a business improvement strategy in the current financial year?"
                    onchange={handleBusinessImprovementChange}
                    checked={businessImprovement}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="governance-management" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Governance and Management">Governance and Management</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="governance-management">
                <lightning-input
                    type="checkbox"
                    label="Have there been any recent changes to your Board (including directors) or senior management personnel?"
                    onchange={handleGovernanceChange}
                    checked={governanceChange}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="recruitment-retention" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Recruitment and Retention">Recruitment and Retention</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="recruitment-retention">
                <lightning-input
                    type="checkbox"
                    label="Are you currently experiencing difficulty finding new staff or retaining existing staff?"
                    onchange={handleRecruitmentChange}
                    checked={recruitmentIssue}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="business-structure" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Business Structure">Business Structure</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="business-structure">
                <div class="slds-text-color_error slds-m-bottom_small">
                    <lightning-icon
                        icon-name="utility:warning"
                        size="x-small"
                        class="slds-m-right_xx-small"
                        alternative-text="Warning"
                    ></lightning-icon>
                    Select all that apply
                </div>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'In-house delivery' as its business structure?"
                    onchange={handleInHouseChange}
                    checked={inHouse}
                ></lightning-input>
                <template if:true={inHouse}>
                    <div class="slds-m-left_medium">
                        <lightning-dual-listbox
                            name="inHouseServices"
                            label="What type of care or services are contracted to these organisations? Select all that apply"
                            options={inHouseServiceOptions}
                            value={inHouseServices}
                            onchange={handleInHouseServicesChange}
                            required
                        >
                        </lightning-dual-listbox>
                        <lightning-textarea
                            name="inHouseAdditionalInfo"
                            label="Additional information (% of care / service delivered by this structure)"
                            value={inHouseAdditionalInfo}
                            onchange={handleInHouseAdditionalInfoChange}
                        ></lightning-textarea>
                    </div>
                </template>
                <div class="slds-m-bottom_medium">
                    <lightning-helptext content="QA Assessor Comments"></lightning-helptext>
                </div>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'Franchise' as its business structure?"
                    onchange={handleFranchiseChange}
                    checked={franchise}
                ></lightning-input>
                <template if:true={franchise}>
                    <div class="slds-m-left_medium">
                        <lightning-dual-listbox
                            name="franchiseServices"
                            label="What type of care or services are contracted to these organisations? Select all that apply"
                            options={franchiseServiceOptions}
                            value={franchiseServices}
                            onchange={handleFranchiseServicesChange}
                            required
                        >
                        </lightning-dual-listbox>
                        <lightning-textarea
                            name="franchiseAdditionalInfo"
                            label="Additional information (% of care / service delivered by this structure)"
                            value={franchiseAdditionalInfo}
                            onchange={handleFranchiseAdditionalInfoChange}
                        ></lightning-textarea>
                    </div>
                </template>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'Brokerage' as its business structure?"
                    onchange={handleBrokerageChange}
                    checked={brokerage}
                ></lightning-input>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'Subcontractor' as its business structure?"
                    onchange={handleSubcontractorChange}
                    checked={subcontractor}
                ></lightning-input>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'Self-employed individual' as its business structure?"
                    onchange={handleSelfEmployedChange}
                    checked={selfEmployed}
                ></lightning-input>
                <lightning-input
                    type="checkbox"
                    label="Does your organisation use 'Other - please specify' as its business structure?"
                    onchange={handleOtherChange}
                    checked={other}
                ></lightning-input>
            </div>
        </div>

        <div class="slds-section slds-is-open">
            <h3 class="slds-section__title">
                <button aria-controls="workforce" class="slds-button slds-section__title-action">
                    <span class="slds-truncate" title="Workforce">Workforce</span>
                </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content" id="workforce">
                <lightning-combobox
                    name="workforceEngagement"
                    label="What is the primary way you have engaged your direct care workforce (including gardening and cleaning) and other direct care workers (including allied health)?"
                    value={workforceEngagement}
                    options={workforceEngagementOptions}
                    onchange={handleWorkforceEngagementChange}
                    required
                ></lightning-combobox>
            </div>
        </div>

        <div class="slds-grid slds-grid_align-center slds-m-top_medium">
            <lightning-button
                label="Previous"
                variant="neutral"
                onclick={handlePrevious}
                disabled={isFirstSection}
                class="slds-m-right_small"
            ></lightning-button>
            <lightning-button
                label="Next"
                variant="brand"
                onclick={handleNext}
                disabled={isLastSection}
                class="slds-m-left_small"
            ></lightning-button>
        </div>
    </div>
</template>
