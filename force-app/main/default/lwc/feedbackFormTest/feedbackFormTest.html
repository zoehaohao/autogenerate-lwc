<template>
    <div class="feedback-container">
        <!-- Success Toast -->
        <template if:true={showSuccessToast}>
            <div class="success-toast">
                <lightning-icon icon-name="utility:success" size="small" variant="inverse"></lightning-icon>
                <span>{successMessage}</span>
                <button class="close-toast" onclick={closeToast}>Ã—</button>
            </div>
        </template>

        <!-- Main Content -->
        <div class="content-section">
            <h2>Help us improve with your feedback</h2>
            
            <!-- Progress Indicator -->
            <div class="progress-bar">
                <div class="progress" style={progressStyle}></div>
                <span class="progress-text">{currentStep}%</span>
                <span class="progress-total">100%</span>
            </div>

            <!-- Step 1 -->
            <template if:true={isStepOne}>
                <h3>How easy was it to make your submission today? (Step 1 of 2)</h3>
                <div class="rating-buttons">
                    <template for:each={ratingOptions} for:item="option">
                        <button 
                            key={option.value}
                            class={option.buttonClass} 
                            onclick={handleRatingSelect}
                            data-value={option.value}>
                            <div class="rating-number">{option.value}</div>
                            <div class="rating-label">{option.label}</div>
                        </button>
                    </template>
                </div>
                <div class="button-container">
                    <lightning-button 
                        label="Next"
                        variant="brand"
                        onclick={handleNext}
                        disabled={isNextDisabled}>
                    </lightning-button>
                </div>
            </template>

            <!-- Step 2 -->
            <template if:true={isStepTwo}>
                <h3>Would you like to provide more details? (Step 2 of 2)</h3>
                <p class="info-text">Please do not include any confidential or personal information.</p>
                <lightning-textarea
                    value={feedbackDetails}
                    onchange={handleFeedbackChange}
                    maxlength="250"
                    placeholder="Your feedback...">
                </lightning-textarea>
                <div class="character-count">
                    <span>{characterCount} of 250</span>
                </div>
                <div class="button-container">
                    <lightning-button 
                        label="Back"
                        variant="neutral"
                        onclick={handleBack}
                        class="back-button">
                    </lightning-button>
                    <lightning-button 
                        label="Submit"
                        variant="brand"
                        onclick={handleSubmit}>
                    </lightning-button>
                </div>
            </template>
        </div>
    </div>
</template>
