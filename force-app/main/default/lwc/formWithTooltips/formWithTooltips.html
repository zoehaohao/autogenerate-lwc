<!-- formWithTooltips.html -->
<template>
    <div class="slds-grid slds-wrap">
        <!-- Solvency Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Solvency">Solvency</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Solvency section</span>
                </button>
            </h3>
            <lightning-input
                label="Are you currently concerned about the solvency of your organisation?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
            <lightning-input
                label="Do you envisage any solvency issues arising in the next six months?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Financial Performance Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Financial Performance">Financial Performance</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Financial Performance section</span>
                </button>
            </h3>
            <lightning-input
                label="Do you forecast an operational loss for the current year?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Home Care Recipients Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Home Care Recipients">Home Care Recipients</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Home Care Recipients section</span>
                </button>
            </h3>
            <lightning-input
                label="Is your current number of home care recipients below the desired level?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Business Improvement Advice or Strategies Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Business Improvement Advice or Strategies">Business Improvement Advice or Strategies</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Business Improvement Advice or Strategies section</span>
                </button>
            </h3>
            <lightning-input
                label="Are you currently implementing, or do you plan to implement, a business improvement strategy in the current financial year?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Governance and Management Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Governance and Management">Governance and Management</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Governance and Management section</span>
                </button>
            </h3>
            <lightning-input
                label="Have there been any recent changes to your Board (including directors) or senior management personnel?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Recruitment and Retention Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Recruitment and Retention">Recruitment and Retention</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Recruitment and Retention section</span>
                </button>
            </h3>
            <lightning-input
                label="Are you currently experiencing difficulty finding staff or retaining existing staff?"
                type="checkbox"
                message-when-value-missing="This field is required"
                required>
            </lightning-input>
        </div>

        <!-- Business Structure Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Business Structure">Business Structure</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Business Structure section</span>
                </button>
            </h3>
            <div class="slds-form-element">
                <span class="slds-form-element__label">What business structure does your organisation use to deliver aged care services?</span>
                <div class="slds-form-element__control">
                    <div class="slds-form-element__icon">
                        <button class="slds-button slds-button_icon">
                            <svg class="slds-button__icon" aria-hidden="true">
                                <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#warning"></use>
                            </svg>
                            <span class="slds-assistive-text">Warning</span>
                        </button>
                    </div>
                    <span class="slds-form-element__help">Select all that apply</span>
                </div>
            </div>
            <lightning-dual-listbox
                name="businessStructures"
                label="Business Structures"
                source-label="Available Structures"
                selected-label="Selected Structures"
                field-level-help="Select the business structures your organisation uses to deliver aged care services."
                options={businessStructureOptions}
                required>
            </lightning-dual-listbox>

            <template if:true={showInhouseDelivery}>
                <div class="slds-form-element">
                    <lightning-input
                        type="checkbox"
                        label="Does your organisation use 'In-house delivery' as its business structure?"
                        onchange={handleInhouseDeliveryChange}>
                    </lightning-input>
                </div>
                <div class="slds-form-element" if:true={inhouseDeliverySelected}>
                    <span class="slds-form-element__label">What type of care or services are contracted to these organisations? Select all that apply</span>
                    <div class="slds-form-element__control">
                        <div class="slds-form-element__icon">
                            <button class="slds-button slds-button_icon">
                                <svg class="slds-button__icon" aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                                </svg>
                                <span class="slds-assistive-text">Info</span>
                            </button>
                        </div>
                    </div>
                    <lightning-checkbox-group
                        name="inhouseDeliveryServices"
                        options={inhouseDeliveryServicesOptions}
                        value={selectedInhouseDeliveryServices}
                        onchange={handleInhouseDeliveryServicesChange}>
                    </lightning-checkbox-group>
                    <lightning-textarea
                        name="inhouseDeliveryAdditionalInfo"
                        label="Additional information (% of care / service delivered by this structure)"
                        value={inhouseDeliveryAdditionalInfo}
                        onchange={handleInhouseDeliveryAdditionalInfoChange}>
                    </lightning-textarea>
                </div>
            </template>

            <template if:true={showFranchisee}>
                <div class="slds-form-element">
                    <lightning-input
                        type="checkbox"
                        label="Does your organisation use 'Franchisee' as its business structure?"
                        onchange={handleFranchiseeChange}>
                    </lightning-input>
                </div>
                <div class="slds-form-element" if:true={franchiseeSelected}>
                    <span class="slds-form-element__label">What type of care or services are contracted to these organisations? Select all that apply</span>
                    <div class="slds-form-element__control">
                        <div class="slds-form-element__icon">
                            <button class="slds-button slds-button_icon">
                                <svg class="slds-button__icon" aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                                </svg>
                                <span class="slds-assistive-text">Info</span>
                            </button>
                        </div>
                    </div>
                    <lightning-checkbox-group
                        name="franchiseeServices"
                        options={franchiseeServicesOptions}
                        value={selectedFranchiseeServices}
                        onchange={handleFranchiseeServicesChange}>
                    </lightning-checkbox-group>
                    <lightning-textarea
                        name="franchiseeAdditionalInfo"
                        label="Additional information (% of care / service delivered by this structure)"
                        value={franchiseeAdditionalInfo}
                        onchange={handleFranchiseeAdditionalInfoChange}>
                    </lightning-textarea>
                </div>
            </template>

            <template for:each={otherBusinessStructures} for:item="structure">
                <div key={structure.value} class="slds-form-element">
                    <lightning-input
                        type="checkbox"
                        label={structure.label}
                        value={structure.value}
                        onchange={handleOtherBusinessStructureChange}>
                    </lightning-input>
                </div>
            </template>
        </div>

        <!-- Workforce Section -->
        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-box slds-theme_shade">
            <h3 class="slds-section__title slds-theme_shade">
                <span class="slds-truncate" title="Workforce">Workforce</span>
                <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small">
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#info"></use>
                    </svg>
                    <span class="slds-assistive-text">Help for Workforce section</span>
                </button>
            </h3>
            <lightning-combobox
                name="directCareWorkforce"
                label="What is the primary way you have engaged your direct care workforce (including gardening and cleaning) and other direct care workers (including allied health)?"
                value={directCareWorkforce}
                options={directCareWorkforceOptions}
                onchange={handleDirectCareWorkforceChange}>
            </lightning-combobox>
            <lightning-combobox
                name="adminWorkforce"
                label="What is the primary way you have engaged your administration and support, and care management workforce?"
                value={adminWorkforce}
                options={adminWorkforceOptions}
                onchange={handleAdminWorkforceChange}>
            </lightning-combobox>
            <lightning-input
                type="checkbox"
                label="I attest that I have increased wages, and passed on all additional funding allocated to the wage increase."
                onchange={handleWageIncreaseAttestation}>
            </lightning-input>
        </div>

        <div class="slds-col slds-size_1-of-1 slds-p-around_medium slds-text-align_right">
            <button class="slds-button slds-button_neutral" onclick={handlePrevious}>Previous</button>
            <button class="slds-button slds-button_brand" onclick={handleNext}>Next</button>
        </div>
    </div>
</template>
