<!-- personalDetailsForm.html -->
<template>
    <div class="root-container">
        <div class="form-container">
            <div class="section" if:true={isPersonalInfoSection}>
                <h2 class="section-header">Personal Information</h2>
                <div class="field-group">
                    <lightning-input 
                        type="text" 
                        label="First Name" 
                        required 
                        placeholder="Enter first name"
                        pattern="[A-Za-z]+"
                        message-when-pattern-mismatch="Please enter letters only"
                        onchange={handleInputChange}
                        data-field="firstName"
                        value={formData.firstName}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="Middle Name" 
                        placeholder="Enter middle name"
                        pattern="[A-Za-z]+"
                        message-when-pattern-mismatch="Please enter letters only"
                        onchange={handleInputChange}
                        data-field="middleName"
                        value={formData.middleName}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="Last Name" 
                        required
                        placeholder="Enter last name"
                        pattern="[A-Za-z]+"
                        message-when-pattern-mismatch="Please enter letters only"
                        onchange={handleInputChange}
                        data-field="lastName"
                        value={formData.lastName}>
                    </lightning-input>

                    <lightning-radio-group
                        name="gender"
                        label="Gender"
                        options={genderOptions}
                        required
                        onchange={handleInputChange}
                        data-field="gender"
                        value={formData.gender}>
                    </lightning-radio-group>

                    <lightning-input 
                        type="date" 
                        label="Date of Birth"
                        required
                        onchange={handleInputChange}
                        data-field="dateOfBirth"
                        value={formData.dateOfBirth}>
                    </lightning-input>

                    <lightning-combobox
                        label="Marital Status"
                        options={maritalStatusOptions}
                        onchange={handleInputChange}
                        data-field="maritalStatus"
                        value={formData.maritalStatus}>
                    </lightning-combobox>

                    <lightning-combobox
                        label="Nationality"
                        required
                        options={nationalityOptions}
                        onchange={handleInputChange}
                        data-field="nationality"
                        value={formData.nationality}>
                    </lightning-combobox>

                    <lightning-input 
                        type="text" 
                        label="SSN"
                        required
                        pattern="[0-9]{9}"
                        message-when-pattern-mismatch="Please enter 9 digits"
                        placeholder="Enter SSN"
                        onchange={handleInputChange}
                        data-field="ssn"
                        value={formData.ssn}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="Driver's License"
                        placeholder="Enter license number"
                        pattern="[A-Za-z0-9]+"
                        message-when-pattern-mismatch="Please enter alphanumeric characters only"
                        onchange={handleInputChange}
                        data-field="driversLicense"
                        value={formData.driversLicense}>
                    </lightning-input>
                </div>
            </div>

            <div class="section" if:true={isContactInfoSection}>
                <h2 class="section-header">Contact Information</h2>
                <div class="field-group">
                    <lightning-input 
                        type="email" 
                        label="Email"
                        required
                        placeholder="Enter email address"
                        onchange={handleInputChange}
                        data-field="email"
                        value={formData.email}>
                    </lightning-input>

                    <lightning-input 
                        type="tel" 
                        label="Phone"
                        required
                        pattern="^\(\d{3}\) \d{3}-\d{4}$"
                        message-when-pattern-mismatch="Please enter phone in format (XXX) XXX-XXXX"
                        placeholder="Enter phone number"
                        onchange={handleInputChange}
                        data-field="phone"
                        value={formData.phone}>
                    </lightning-input>

                    <lightning-combobox
                        label="Preferred Contact Method"
                        required
                        options={contactMethodOptions}
                        onchange={handleInputChange}
                        data-field="preferredContact"
                        value={formData.preferredContact}>
                    </lightning-combobox>

                    <lightning-input 
                        type="checkbox" 
                        label="Subscribe to Newsletter"
                        onchange={handleInputChange}
                        data-field="newsletter"
                        checked={formData.newsletter}>
                    </lightning-input>

                    <lightning-input 
                        type="tel" 
                        label="Alternative Phone"
                        pattern="^\(\d{3}\) \d{3}-\d{4}$"
                        message-when-pattern-mismatch="Please enter phone in format (XXX) XXX-XXXX"
                        placeholder="Enter alt phone"
                        onchange={handleInputChange}
                        data-field="altPhone"
                        value={formData.altPhone}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="Social Media"
                        placeholder="Enter handle"
                        onchange={handleInputChange}
                        data-field="socialMedia"
                        value={formData.socialMedia}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="IM Handle"
                        placeholder="Enter IM handle"
                        onchange={handleInputChange}
                        data-field="imHandle"
                        value={formData.imHandle}>
                    </lightning-input>

                    <lightning-input 
                        type="text" 
                        label="Fax"
                        pattern="[0-9]+"
                        message-when-pattern-mismatch="Please enter numbers only"
                        placeholder="Enter fax number"
                        onchange={handleInputChange}
                        data-field="fax"
                        value={formData.fax}>
                    </lightning-input>
                </div>
            </div>

            <div class="button-group">
                <lightning-button 
                    label="Previous" 
                    onclick={handlePrevious}
                    class="slds-m-right_x-small"
                    variant="neutral">
                </lightning-button>
                
                <lightning-button 
                    label="Save Progress"
                    onclick={handleSaveProgress}
                    class="slds-m-right_x-small"
                    variant="brand">
                </lightning-button>

                <lightning-button 
                    label="Next"
                    onclick={handleNext}
                    variant="brand">
                </lightning-button>

                <lightning-button 
                    if:true={isLastSection}
                    label="Submit"
                    onclick={handleSubmit}
                    variant="brand"
                    class="submit-button"
                    disabled={isSubmitDisabled}>
                </lightning-button>
            </div>

            <template if:true={errorMessage}>
                <div class="error-message">
                    {errorMessage}
                </div>
            </template>
        </div>
    </div>
</template>