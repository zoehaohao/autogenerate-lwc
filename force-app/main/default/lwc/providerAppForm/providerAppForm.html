<template>
    <!-- Progress Indicator -->
    <lightning-progress-indicator 
        current-step={currentPageString}
        type="path"
        variant="base">
        <lightning-progress-step 
            label="Organization Details" 
            value="1">
        </lightning-progress-step>
        <lightning-progress-step 
            label="Key Personnel" 
            value="2">
        </lightning-progress-step>
        <lightning-progress-step 
            label="Provider Suitability" 
            value="3">
        </lightning-progress-step>
        <lightning-progress-step 
            label="Care Type Details" 
            value="4">
        </lightning-progress-step>
    </lightning-progress-indicator>

    <!-- Page 1: Organization Details -->
    <div if:true={isPage1}>
        <lightning-card title="Organization Details">
            <div class="slds-p-around_medium">
                <lightning-input
                    label="Company Legal Name"
                    value={formData.companyLegalName}
                    required
                    onchange={handleFieldChange}
                    data-field="companyLegalName">
                </lightning-input>
                
                <lightning-input
                    label="ACN/IAN/ICN"
                    value={formData.companyNumber}
                    required
                    onchange={handleFieldChange}
                    data-field="companyNumber">
                </lightning-input>

                <lightning-input
                    label="ABN"
                    value={formData.abn}
                    required
                    onchange={handleFieldChange}
                    data-field="abn">
                </lightning-input>

                <lightning-input
                    label="Business Name"
                    value={formData.businessName}
                    onchange={handleFieldChange}
                    data-field="businessName">
                </lightning-input>

                <lightning-textarea
                    label="Registered Business Address"
                    value={formData.businessAddress}
                    required
                    onchange={handleFieldChange}
                    data-field="businessAddress">
                </lightning-textarea>

                <lightning-combobox
                    label="Organization Type"
                    value={formData.orgType}
                    options={orgTypeOptions}
                    required
                    onchange={handleFieldChange}
                    data-field="orgType">
                </lightning-combobox>
            </div>
        </lightning-card>
    </div>

    <!-- Page 2: Key Personnel -->
    <div if:true={isPage2}>
        <lightning-card title="Key Personnel Details">
            <div class="slds-p-around_medium">
                <template for:each={keyPersonnel} for:item="person" for:index="index">
                    <div key={person.id} class="slds-box slds-m-bottom_medium">
                        <lightning-input
                            label="Full Name"
                            value={person.fullName}
                            required
                            onchange={handleKeyPersonnelChange}
                            data-index={index}
                            data-field="fullName">
                        </lightning-input>

                        <lightning-input
                            label="Position"
                            value={person.position}
                            required
                            onchange={handleKeyPersonnelChange}
                            data-index={index}
                            data-field="position">
                        </lightning-input>

                        <lightning-input
                            type="email"
                            label="Email"
                            value={person.email}
                            required
                            onchange={handleKeyPersonnelChange}
                            data-index={index}
                            data-field="email">
                        </lightning-input>

                        <lightning-input
                            type="tel"
                            label="Phone"
                            value={person.phone}
                            required
                            onchange={handleKeyPersonnelChange}
                            data-index={index}
                            data-field="phone">
                        </lightning-input>
                    </div>
                </template>
                <lightning-button 
                    label="Add Key Personnel" 
                    onclick={handleAddKeyPersonnel}
                    variant="neutral">
                </lightning-button>
            </div>
        </lightning-card>
    </div>

    <!-- Navigation Buttons -->
    <div class="slds-docked-form-footer">
        <lightning-button 
            label="Previous" 
            onclick={handlePrevious}
            disabled={isPreviousDisabled}
            variant="neutral"
            class="slds-m-right_small">
        </lightning-button>
        <lightning-button 
            label="Next" 
            onclick={handleNext}
            disabled={isNextDisabled}
            variant="brand"
            class="slds-m-right_small">
        </lightning-button>
        <lightning-button 
            label="Save" 
            onclick={handleSave}
            disabled={isSaveDisabled}
            variant="success">
        </lightning-button>
    </div>
</template>
