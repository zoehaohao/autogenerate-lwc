<!-- qfrFormTest.html -->
<template>
    <lightning-card title="User Registration Form" icon-name="standard:form">
        <div class="slds-p-around_medium">
            <!-- Form Container -->
            <lightning-record-edit-form object-api-name="Contact" onsubmit={handleSubmit}>
                <div class="slds-grid slds-wrap slds-gutters">
                    <!-- First Name Field -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="First Name"
                            name="firstName"
                            type="text"
                            value={formData.firstName}
                            placeholder="Enter first name"
                            required
                            onchange={handleInputChange}
                            class={firstNameCssClass}>
                            <lightning-helptext 
                                slot="help" 
                                content="Enter your legal first name as it appears on official documents. Only letters are allowed, maximum 50 characters. This field is required for account creation and identification purposes.">
                            </lightning-helptext>
                        </lightning-input>
                        <div if:true={errors.firstName} class="slds-text-color_error slds-text-body_small slds-m-top_xx-small">
                            {errors.firstName}
                        </div>
                    </div>

                    <!-- Last Name Field -->
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                        <lightning-input
                            label="Last Name"
                            name="lastName"
                            type="text"
                            value={formData.lastName}
                            placeholder="Enter last name"
                            required
                            onchange={handleInputChange}
                            class={lastNameCssClass}>
                            <lightning-helptext 
                                slot="help" 
                                content="Enter your legal last name (surname/family name) as it appears on official documents. Only letters are allowed, maximum 50 characters. This field is required for account creation and identification purposes.">
                            </lightning-helptext>
                        </lightning-input>
                        <div if:true={errors.lastName} class="slds-text-color_error slds-text-body_small slds-m-top_xx-small">
                            {errors.lastName}
                        </div>
                    </div>

                    <!-- Email Field -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-input
                            label="Email Address"
                            name="email"
                            type="email"
                            value={formData.email}
                            placeholder="Enter email address"
                            required
                            onchange={handleInputChange}
                            class={emailCssClass}>
                            <lightning-helptext 
                                slot="help" 
                                content="Enter a valid email address (e.g., john.doe@company.com). This will be used for account verification, notifications, and communication. Ensure you have access to this email as a verification link will be sent.">
                            </lightning-helptext>
                        </lightning-input>
                        <div if:true={errors.email} class="slds-text-color_error slds-text-body_small slds-m-top_xx-small">
                            {errors.email}
                        </div>
                    </div>

                    <!-- Phone Field -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-input
                            label="Phone Number"
                            name="phone"
                            type="tel"
                            value={formData.phone}
                            placeholder="Enter phone number"
                            onchange={handleInputChange}
                            class={phoneCssClass}>
                            <lightning-helptext 
                                slot="help" 
                                content="Enter your primary contact phone number. Include country code if international (e.g., +1-555-123-4567). This field is optional but recommended for account security and support contact purposes.">
                            </lightning-helptext>
                        </lightning-input>
                        <div if:true={errors.phone} class="slds-text-color_error slds-text-body_small slds-m-top_xx-small">
                            {errors.phone}
                        </div>
                    </div>

                    <!-- Address Field -->
                    <div class="slds-col slds-size_1-of-1">
                        <lightning-textarea
                            label="Address"
                            name="address"
                            value={formData.address}
                            placeholder="Enter your complete address"
                            max-length="200"
                            onchange={handleInputChange}
                            class={addressCssClass}>
                            <lightning-helptext 
                                slot="help" 
                                content="Enter your complete mailing address including street number, street name, city, state/province, and postal code. Maximum 200 characters. This field is optional but may be required for certain services or verification purposes.">
                            </lightning-helptext>
                        </lightning-textarea>
                        <div if:true={errors.address} class="slds-text-color_error slds-text-body_small slds-m-top_xx-small">
                            {errors.address}
                        </div>
                    </div>
                </div>

                <!-- Form-level Error Summary -->
                <div if:true={hasFormErrors} class="slds-notify slds-notify_alert slds-theme_error slds-m-top_medium" role="alert">
                    <span class="slds-assistive-text">Error</span>
                    <h2>Please correct the following errors:</h2>
                    <ul class="slds-list_dotted slds-m-top_x-small">
                        <li if:true={errors.firstName}>{errors.firstName}</li>
                        <li if:true={errors.lastName}>{errors.lastName}</li>
                        <li if:true={errors.email}>{errors.email}</li>
                        <li if:true={errors.phone}>{errors.phone}</li>
                        <li if:true={errors.address}>{errors.address}</li>
                    </ul>
                </div>

                <!-- Success Message -->
                <div if:true={showSuccessMessage} class="slds-notify slds-notify_alert slds-theme_success slds-m-top_medium" role="alert">
                    <span class="slds-assistive-text">Success</span>
                    <h2>Form submitted successfully!</h2>
                    <p>Your information has been saved and processed.</p>
                </div>

                <!-- Action Buttons -->
                <div class="slds-text-align_center slds-m-top_large">
                    <lightning-button
                        label="Reset"
                        variant="neutral"
                        onclick={handleReset}
                        disabled={isLoading}
                        class="slds-m-right_small">
                    </lightning-button>
                    
                    <lightning-button
                        label="Submit"
                        variant="brand"
                        type="submit"
                        disabled={submitDisabled}
                        class="slds-m-left_small">
                    </lightning-button>
                </div>

                <!-- Loading Spinner -->
                <div if:true={isLoading} class="slds-is-relative slds-m-top_medium">
                    <lightning-spinner alternative-text="Processing..." size="medium"></lightning-spinner>
                </div>
            </lightning-record-edit-form>
        </div>
    </lightning-card>
</template>
