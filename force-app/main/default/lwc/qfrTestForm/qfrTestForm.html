<!-- qfrFormTest.html -->
<template>
    <div class="qfr-form-container">
        <!-- Progress Indicator -->
        <lightning-progress-indicator 
            current-step={currentStep} 
            type="path" 
            variant="base">
            <lightning-progress-step label="Residential Viability" value="1"></lightning-progress-step>
            <lightning-progress-step label="Contact Information" value="2"></lightning-progress-step>
            <lightning-progress-step label="Business Structure" value="3"></lightning-progress-step>
            <lightning-progress-step label="Financial Statements" value="4"></lightning-progress-step>
            <lightning-progress-step label="Labour Costs" value="5"></lightning-progress-step>
            <lightning-progress-step label="Document Upload" value="6"></lightning-progress-step>
        </lightning-progress-indicator>

        <!-- Loading Spinner -->
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
        </template>

        <!-- Page 1: Residential Viability and Prudential Reporting -->
        <template if:true={isPage1}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Residential Viability and Prudential Reporting</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- About Section -->
                    <lightning-accordion 
                        active-section-name={openSections} 
                        allow-multiple-sections-open="true"
                        onselect={handleAccordionToggle}>
                        <lightning-accordion-section name="about-section" label="About this section">
                            <p class="slds-m-bottom_small">
                                This section collects information about the financial health and viability of residential care services 
                                to identify providers who may need additional support or intervention. Your responses help us understand 
                                your organization's current financial position and any potential concerns.
                            </p>
                        </lightning-accordion-section>
                    </lightning-accordion>

                    <!-- Solvency Section -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Solvency">Solvency</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-form-element slds-m-bottom_medium">
                                <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                    <span class="slds-m-right_xx-small">Are you currently concerned about the solvency of your organisation?</span>
                                    <lightning-helptext 
                                        content="Solvency refers to your organization's ability to meet long-term debts and financial obligations. Consider your current cash flow, debt levels, and ability to pay creditors when due."
                                        icon-name="utility:info"
                                        icon-variant="bare">
                                    </lightning-helptext>
                                </div>
                                <div class="slds-form-element__control">
                                    <lightning-radio-group 
                                        name="solvencyConcern"
                                        options={yesNoOptions}
                                        value={formData.solvencyConcern}
                                        onchange={handleInputChange}
                                        type="button"
                                        variant="label-hidden">
                                    </lightning-radio-group>
                                </div>
                                <template if:true={errors.solvencyConcern}>
                                    <div class="slds-form-element__help">{errors.solvencyConcern}</div>
                                </template>
                            </div>

                            <div class="slds-form-element slds-m-bottom_medium">
                                <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                    <span class="slds-m-right_xx-small">Do you envisage any solvency issues arising in the next six months?</span>
                                    <lightning-helptext 
                                        content="Consider your projected cash flow, upcoming debt obligations, seasonal variations in revenue, and any known financial challenges that may impact your ability to meet obligations in the next 6 months."
                                        icon-name="utility:info"
                                        icon-variant="bare">
                                    </lightning-helptext>
                                </div>
                                <div class="slds-form-element__control">
                                    <lightning-radio-group 
                                        name="futureSolvencyIssues"
                                        options={yesNoOptions}
                                        value={formData.futureSolvencyIssues}
                                        onchange={handleInputChange}
                                        type="button"
                                        variant="label-hidden">
                                    </lightning-radio-group>
                                </div>
                                <template if:true={errors.futureSolvencyIssues}>
                                    <div class="slds-form-element__help">{errors.futureSolvencyIssues}</div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Performance Section -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Financial Performance">Financial Performance</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-form-element">
                                <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                    <span class="slds-m-right_xx-small">Do you forecast an operational loss for the current year?</span>
                                    <lightning-helptext 
                                        content="An operational loss occurs when operating expenses exceed operating revenues from your core care services. Consider your year-to-date performance, budget forecasts, and any extraordinary items that may impact this year's results. This excludes investment income or one-time asset sales."
                                        icon-name="utility:info"
                                        icon-variant="bare">
                                    </lightning-helptext>
                                </div>
                                <div class="slds-form-element__control">
                                    <lightning-radio-group 
                                        name="operationalLoss"
                                        options={yesNoOptions}
                                        value={formData.operationalLoss}
                                        onchange={handleInputChange}
                                        type="button"
                                        variant="label-hidden">
                                    </lightning-radio-group>
                                </div>
                                <template if:true={errors.operationalLoss}>
                                    <div class="slds-form-element__help">{errors.operationalLoss}</div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- Page 2: Provider Contact Information -->
        <template if:true={isPage2}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Provider Contact Information</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- About Section -->
                    <lightning-accordion 
                        active-section-name={openSections} 
                        allow-multiple-sections-open="true"
                        onselect={handleAccordionToggle}>
                        <lightning-accordion-section name="contact-about" label="About this section">
                            <p class="slds-m-bottom_small">
                                Please ensure we have current, accurate contact information for the primary person responsible 
                                for the QFR submission and any follow-up communications. This information will be used for 
                                official correspondence regarding your submission.
                            </p>
                        </lightning-accordion-section>
                    </lightning-accordion>

                    <!-- Account Information -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Account Information">Account Information</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">Organisation Name</label>
                                        <div class="slds-form-element__control">
                                            <div class="slds-form-element__static">{contactInfo.organisationName}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <label class="slds-form-element__label">NAPS ID</label>
                                        <div class="slds-form-element__control">
                                            <div class="slds-form-element__static">{contactInfo.napsId}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Primary Contact -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Primary Contact">Primary Contact</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-grid slds-grid_align-end slds-m-bottom_medium">
                                <lightning-button 
                                    label={editButtonLabel}
                                    variant={editButtonVariant}
                                    onclick={handleEditContact}>
                                </lightning-button>
                            </div>

                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Contact Name</span>
                                            <lightning-helptext 
                                                content="Full name of the primary contact person responsible for this QFR submission and follow-up communications."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <template if:false={isEditMode}>
                                                <div class="slds-form-element__static">{contactInfo.contactName}</div>
                                            </template>
                                            <template if:true={isEditMode}>
                                                <lightning-input 
                                                    name="contactName"
                                                    value={contactInfo.contactName}
                                                    onchange={handleContactChange}
                                                    variant="label-hidden"
                                                    required>
                                                </lightning-input>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Position</span>
                                            <lightning-helptext 
                                                content="Job title or position of the contact person within your organization (e.g., Finance Manager, CEO, Administrator)."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <template if:false={isEditMode}>
                                                <div class="slds-form-element__static">{contactInfo.position}</div>
                                            </template>
                                            <template if:true={isEditMode}>
                                                <lightning-input 
                                                    name="position"
                                                    value={contactInfo.position}
                                                    onchange={handleContactChange}
                                                    variant="label-hidden"
                                                    required>
                                                </lightning-input>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Phone</span>
                                            <lightning-helptext 
                                                content="Primary phone number in Australian format (e.g., 02 1234 5678 or 0412 345 678). Include area code for landlines."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <template if:false={isEditMode}>
                                                <div class="slds-form-element__static">{contactInfo.phone}</div>
                                            </template>
                                            <template if:true={isEditMode}>
                                                <lightning-input 
                                                    name="phone"
                                                    type="tel"
                                                    value={contactInfo.phone}
                                                    onchange={handleContactChange}
                                                    variant="label-hidden"
                                                    required>
                                                </lightning-input>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Email</span>
                                            <lightning-helptext 
                                                content="Valid email address for official correspondence. This will be used for submission confirmations and any follow-up questions."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <template if:false={isEditMode}>
                                                <div class="slds-form-element__static">{contactInfo.email}</div</template>
                                            <template if:true={isEditMode}>
                                                <lightning-input 
                                                    name="email"
                                                    type="email"
                                                    value={contactInfo.email}
                                                    onchange={handleContactChange}
                                                    variant="label-hidden"
                                                    required>
                                                </lightning-input>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- Page 3: Business Structure Configuration -->
        <template if:true={isPage3}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Business Structure Configuration</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- Business Structure Toggles -->
                    <div class="slds-grid slds-wrap slds-gutters">
                        <template for:each={businessStructures} for:item="structure">
                            <div key={structure.name} class="slds-col slds-size_1-of-2 slds-m-bottom_medium">
                                <div class="slds-form-element">
                                    <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                        <span class="slds-m-right_xx-small">{structure.label}</span>
                                        <lightning-helptext 
                                            content={structure.helpText}
                                            icon-name="utility:info"
                                            icon-variant="bare">
                                        </lightning-helptext>
                                    </div>
                                    <div class="slds-form-element__control">
                                        <lightning-input 
                                            type="toggle"
                                            name={structure.name}
                                            checked={structure.selected}
                                            onchange={handleStructureToggle}
                                            variant="label-hidden">
                                        </lightning-input>
                                    </div>
                                </div>
                                
                                <template if:true={structure.selected}>
                                    <div class="slds-box slds-theme_shade slds-m-top_small">
                                        <div class="slds-form-element">
                                            <label class="slds-form-element__label">Service Types</label>
                                            <div class="slds-form-element__control">
                                                <lightning-checkbox-group 
                                                    name={structure.serviceTypesName}
                                                    options={serviceTypeOptions}
                                                    value={structure.serviceTypes}
                                                    onchange={handleServiceTypeChange}>
                                                </lightning-checkbox-group>
                                            </div>
                                        </div>
                                        <div class="slds-form-element slds-m-top_small">
                                            <label class="slds-form-element__label">Additional Information</label>
                                            <div class="slds-form-element__control">
                                                <lightning-textarea 
                                                    name={structure.additionalInfoName}
                                                    value={structure.additionalInfo}
                                                    onchange={handleAdditionalInfoChange}
                                                    placeholder="Provide percentage breakdowns and explanations">
                                                </lightning-textarea>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>

                    <!-- Workforce Section -->
                    <div class="slds-section slds-is-open slds-m-top_large">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Workforce">Workforce</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-form-element">
                                <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                    <span class="slds-m-right_xx-small">How are your direct care workers engaged?</span>
                                    <lightning-helptext 
                                        content="Select the primary method by which your organization engages direct care workers (employees, contractors, agency staff, etc.)."
                                        icon-name="utility:info"
                                        icon-variant="bare">
                                    </lightning-helptext>
                                </div>
                                <div class="slds-form-element__control">
                                    <lightning-combobox 
                                        name="workforceType"
                                        value={formData.workforceType}
                                        placeholder="Select workforce engagement type"
                                        options={workforceOptions}
                                        onchange={handleInputChange}
                                        variant="label-hidden">
                                    </lightning-combobox>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- Page 4: Year to Date Financial Statements -->
        <template if:true={isPage4}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Year to Date Financial Statements</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- Reissued Section -->
                    <lightning-accordion 
                        active-section-name="reissued-section"
                        allow-multiple-sections-open="true"
                        onselect={handleAccordionToggle}>
                        <lightning-accordion-section name="reissued-section" label="Why was this section reissued?">
                            <p class="slds-m-bottom_small">
                                An explanation that you have provided in the section was not accepted by a Quality Assessor (QA). 
                                You can navigate to the relevant data item by selecting a hyperlink below. You can review the comment 
                                for why the explanation was not accepted by selecting the icon next to the data item. You can choose 
                                to provide a new explanation or update the data item. Alternatively, you can discuss the comments 
                                by contacting Forms Administration.
                            </p>
                            <ul class="slds-list_dotted">
                                <li><a href="#" onclick={handleDataItemClick}>Under 85% of total wages as direct care (residential care)</a></li>
                            </ul>
                        </lightning-accordion-section>
                    </lightning-accordion>

                    <!-- About Section -->
                    <lightning-accordion 
                        active-section-name={openSections} 
                        allow-multiple-sections-open="true"
                        onselect={handleAccordionToggle}
                        class="slds-m-top_medium">
                        <lightning-accordion-section name="financial-about" label="About this section">
                            <div class="slds-m-bottom_small">
                                <p><strong>Financial year to date basis:</strong> July - September 2024</p>
                                <p><strong>Reporting requirements:</strong></p>
                                <ul class="slds-list_dotted slds-m-left_medium">
                                    <li>GST exclusive amounts only</li>
                                    <li>Accrual basis accounting</li>
                                    <li>Report in whole dollars</li>
                                    <li>Community segment includes CHSP, DVA and other non-aged care services</li>
                                </ul>
                                <p class="slds-m-top_small"><strong>Contact Forms Administration:</strong> (02) 4403 0640</p>
                            </div>
                        </lightning-accordion-section>
                    </lightning-accordion>

                    <!-- Column Relevance Selection -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Column Relevance">Column Relevance</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-notify slds-notify_alert slds-theme_warning slds-m-bottom_medium">
                                <span class="slds-assistive-text">Warning</span>
                                <h2>Unchecking columns will populate those fields with $0.00 and overwrite existing data</h2>
                            </div>
                            <lightning-checkbox-group 
                                name="columnRelevance"
                                options={columnRelevanceOptions}
                                value={selectedColumns}
                                onchange={handleColumnRelevanceChange}>
                            </lightning-checkbox-group>
                        </div>
                    </div>

                    <!-- Financial Data Table -->
                    <div class="slds-section slds-is-open slds-m-top_medium">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Home Care Labour Costs and Hours">Home Care Labour Costs and Hours</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <lightning-datatable 
                                key-field="id"
                                data={financialData}
                                columns={financialColumns}
                                oncellchange={handleFinancialDataChange}
                                hide-checkbox-column="true">
                            </lightning-datatable>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!-- Page 5: Labour Costs Data Management -->
        <template if:true={isPage5}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Labour Costs Data Management</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- Table Controls -->
                    <div class="slds-grid slds-gutters slds-m-bottom_medium">
                        <div class="slds-col">
                            <lightning-combobox 
                                name="viewAll"
                                label="View all"
                                value={viewAllFilter}
                                placeholder="Select view"
                                options={viewAllOptions}
                                onchange={handleViewAllChange}>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col">
                            <lightning-button 
                                label="Expand Table"
                                variant="neutral"
                                onclick={handleExpandTable}>
                            </lightning-button>
                        </div>
                        <div class="slds-col">
                            <lightning-combobox 
                                name="jumpToSection"
                                label="Jump to Section"
                                value={jumpToSection}
                                placeholder="Select section"
                                options={sectionOptions}
                                onchange={handleJumpToSection}>
                            </lightning-combobox>
                        </div>
                        <div class="slds-col">
                            <lightning-combobox 
                                name="jumpToColumn"
                                label="Jump to Column"
                                value={jumpToColumn}
                                placeholder="Select column"
                                options={columnOptions}
                                onchange={handleJumpToColumn}>
                            </lightning-combobox>
                        </div>
                    </div>

                    <!-- Centrally Held Toggle -->
                    <div class="slds-form-element slds-m-bottom_medium">
                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                            <span class="slds-m-right_xx-small">Centrally Held</span>
                            <lightning-helptext 
                                content="Toggle to indicate if labour costs are managed centrally across multiple locations or services."
                                icon-name="utility:info"
                                icon-variant="bare">
                            </lightning-helptext>
                        </div>
                        <div class="slds-form-element__control">
                            <lightning-input 
                                type="toggle"
                                name="centrallyHeld"
                                checked={formData.centrallyHeld}
                                onchange={handleInputChange}>
                            </lightning-input>
                            <span class="slds-m-left_small">Value: {centrallyHeldValue}</span>
                        </div>
                    </div>

                    <!-- Labour Costs Data Table -->
                    <div class="labour-costs-table">
                        <lightning-datatable 
                            key-field="id"
                            data={labourCostsData}
                            columns={labourCostsColumns}
                            oncellchange={handleLabourCostsChange}
                            hide-checkbox-column="true"
                            class="custom-datatable">
                        </lightning-datatable>
                    </div>
                </div>
            </div>
        </template>

        <!-- Page 6: Document Management and Submission -->
        <template if:true={isPage6}>
            <div class="slds-card slds-m-bottom_medium">
                <div class="slds-card__header slds-border_bottom">
                    <h2 class="slds-card__header-title">
                        <span>Document Management and Submission</span>
                    </h2>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <!-- Document Upload -->
                    <div class="slds-section slds-is-open">
                        <h3 class="slds-section__title slds-theme_shade">
                            <span class="slds-truncate slds-p-horizontal_small" title="Document Upload">Document Upload</span>
                        </h3>
                        <div class="slds-section__content slds-p-around_medium">
                            <div class="slds-grid slds-gutters slds-m-bottom_medium">
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Category</span>
                                            <lightning-helptext 
                                                content="Select the appropriate category for your document (e.g., Financial Statement, Declaration, Supporting Documentation)."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <lightning-combobox 
                                                name="documentCategory"
                                                value={documentCategory}
                                                placeholder="Select category"
                                                options={documentCategoryOptions}
                                                onchange={handleDocumentCategoryChange}
                                                variant="label-hidden">
                                            </lightning-combobox>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-form-element">
                <div class="slds-form-element__label slds-grid slds-grid_vertical-align-center">
                                            <span class="slds-m-right_xx-small">Type</span>
                                            <lightning-helptext 
                                                content="Specify the document type or format (e.g., PDF, Excel, Word Document, Image)."
                                                icon-name="utility:info"
                                                icon-variant="bare">
                                            </lightning-helptext>
                                        </div>
                                        <div class="slds-form-element__control">
                                            <lightning-combobox 
                                                name="documentType"
                                                value={documentType}
                                                placeholder="Select type"
                                                options={documentTypeOptions}
                                                onchange={handleDocumentTypeChange}
                                                variant="label-hidden">
                                            </lightning-combobox>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- File Upload Area -->
                            <div class="file-upload-area slds-border_top slds-border_right slds-border_bottom slds-border_left slds-p-around_large slds-text-align_center">
                                <lightning-input 
                                    type="file"
                                    name="fileUpload"
                                    label="Upload Files"
                                    multiple
                                    accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"
                                    onchange={handleFileUpload}
                                    class="file-input">
                                </lightning-input>
                                <div class="slds-m-top_small">
                                    <p>Drag and drop files here or click to browse</p>
                                    <p class="slds-text-color_weak">Supported formats: PDF, Word, Excel, Images</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Document Management Table -->
                    <template if:true={uploadedFiles.length}>
                        <div class="slds-section slds-is-open slds-m-top_medium">
                            <h3 class="slds-section__title slds-theme_shade">
                                <span class="slds-truncate slds-p-horizontal_small" title="Uploaded Documents">Uploaded Documents</span>
                            </h3>
                            <div class="slds-section__content slds-p-around_medium">
                                <lightning-datatable 
                                    key-field="id"
                                    data={uploadedFiles}
                                    columns={documentColumns}
                                    onrowaction={handleDocumentAction}
                                    hide-checkbox-column="true">
                                </lightning-datatable>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </template>

        <!-- Navigation Buttons -->
        <div class="slds-grid slds-grid_align-spread slds-m-top_large">
            <div>
                <lightning-button 
                    label="Previous"
                    variant="neutral"
                    onclick={handlePrevious}
                    disabled={isPreviousDisabled}>
                </lightning-button>
            </div>
            <div>
                <lightning-button 
                    label={nextButtonLabel}
                    variant="brand"
                    onclick={handleNext}
                    disabled={isNextDisabled}>
                </lightning-button>
            </div>
        </div>
    </div>
</template>
