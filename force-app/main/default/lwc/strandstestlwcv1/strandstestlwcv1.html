<template>
    <lightning-card title="ABN Lookup" icon-name="standard:search">
        <div class="slds-p-horizontal_medium">
            <div class="slds-grid slds-wrap slds-gutters">
                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                    <lightning-input
                        label="ABN"
                        value={abnNumber}
                        onchange={handleAbnChange}
                        placeholder="Enter ABN (e.g., 45 004 189 708)"
                        class="slds-m-bottom_small">
                    </lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                    <div class="slds-m-top_large">
                        <lightning-button
                            label="Change ABN"
                            onclick={handleLookup}
                            variant="brand"
                            disabled={isLoading}>
                        </lightning-button>
                    </div>
                </div>
            </div>

            <template if:true={isLoading}>
                <div class="slds-m-top_medium">
                    <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                </div>
            </template>

            <template if:true={businessInfo}>
                <div class="slds-m-top_medium">
                    <div class="business-info-container">
                        <div class="slds-grid slds-wrap slds-gutters">
                            <div class="slds-col slds-size_1-of-1">
                                <div class="abn-display">
                                    <strong>ABN: {businessInfo.abn}</strong>
                                </div>
                                <div class="entity-name">
                                    <strong>Entity Name: {businessInfo.entityName}</strong>
                                </div>
                            </div>
                        </div>
                        
                        <div class="slds-grid slds-wrap slds-gutters slds-m-top_small">
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <div class="info-item">
                                    <span class="label">ABN Status:</span>
                                    <span class="value">{businessInfo.abnStatus}</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Entity Type:</span>
                                    <span class="value">{businessInfo.entityType}</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Goods & Services Tax (GST):</span>
                                    <span class="value">{businessInfo.gstStatus}</span>
                                </div>
                            </div>
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2">
                                <div class="info-item">
                                    <span class="label">Active Since:</span>
                                    <span class="value">{businessInfo.activeSince}</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Main Business Location:</span>
                                    <span class="value">{businessInfo.mainBusinessLocation}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template if:true={errorMessage}>
                <div class="slds-m-top_medium">
                    <div class="slds-notify slds-notify_alert slds-alert_error">
                        <span class="slds-assistive-text">Error</span>
                        <h2>{errorMessage}</h2>
                    </div>
                </div>
            </template>
        </div>
    </lightning-card>
</template>